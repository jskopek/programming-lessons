<div class="d-flex align-items-center mb-3 snippet">
    <div class="flex-grow-1 mr-4">
        <h5>Code:</h5>
        {% if include.code %}
        {% assign code_url = include.code %}
        {% capture source_code %}{% include_relative {{ code_url }} %}{% endcapture %}

        {% assign lines = source_code|split:"\n" %}
        {% assign adds = include.add|split:',' %}
        {% assign subs = include.sub|split:',' %}
        <div class="codeblock">
            {% for line in lines %}{% capture index_string %}{{ forloop.index }}{% endcapture %}<div class="{% if adds contains index_string %}add{% endif %}{% if subs contains index_string %}sub{% endif %}">{{ line }}</div>{% endfor %}
        </div>
        {% endif %}
    </div>

    <div>
        <h5>Preview:</h5>
        <canvas data-processing-sources="{{ include.code }}"></canvas>
    </div>
</div>

